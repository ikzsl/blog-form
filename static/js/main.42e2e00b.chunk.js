(this["webpackJsonpblog-form"]=this["webpackJsonpblog-form"]||[]).push([[0],{187:function(e,a,t){e.exports=t(337)},196:function(e,a,t){},335:function(e,a,t){},336:function(e,a,t){},337:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(42),l=t.n(c),o=t(19),s=t(167),u=t(61),m=t(168),i=t(65),p={currentUser:{},error:null};t(195),t(196);var d=t(79),E=t(6),f=t(22),b=t.n(f),h=t(55),v=t(115),j=t.n(v),O="https://conduit.productionready.io/api/",g=function(){return[O,"users"].join("/")},w=function(){return[O,"users","login"].join("/")},k=function(){return[O,"user"].join("/")},N=function(e){return{type:"CHANGE_FETCH_STATUS",payload:e}},y=function(e){return{type:"LOGIN_USER",payload:e}},S=function(e){return function(){var a=Object(h.a)(b.a.mark((function a(t){var n,r,c,l,o,s;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n=g(),a.next=4,j.a.post(n,{user:e});case 4:r=a.sent,c=r.data,localStorage.setItem("token",c.user.token),t({type:"CHANGE_FETCH_STATUS",payload:null}),t(y(c.user)),a.next=17;break;case 11:a.prev=11,a.t0=a.catch(0),l=a.t0.response.data.errors,o=Object.keys(l),s="".concat(o[0]," ").concat(l[o[0]].join(" ")),t(N(s));case 17:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()},x=function(e){return function(){var a=Object(h.a)(b.a.mark((function a(t){var n,r,c,l,o,s;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n=w(),a.next=4,j.a.post(n,{user:e});case 4:r=a.sent,c=r.data,localStorage.setItem("token",c.user.token),t({type:"CHANGE_FETCH_STATUS",payload:null}),t(y(c.user)),a.next=17;break;case 11:a.prev=11,a.t0=a.catch(0),l=a.t0.response.data.errors,o=Object.keys(l),s="".concat(o[0]," ").concat(l[o[0]].join(" ")),t(N(s));case 17:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()},U=t(12),T=t(45),A=t(339),z=t(341),C=t(338),F=t(342),I=t(343),_=function(){var e=Object(o.b)(),a=Object(o.c)((function(e){return e.error})),t=T.a().shape({username:T.b().max(50,"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u043e - \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u0418\u043c\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"),password:T.b().matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{6,40}$/,"\u043e\u0442 6 \u0434\u043e 40 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432, \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0430 \u0446\u0438\u0444\u0440\u0430 \u0438 \u043e\u0434\u043d\u0430 \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u0430\u044f \u0431\u0443\u043a\u0432\u0430").required("\u041f\u0430\u0440\u043e\u043b\u044c \u043d\u0443\u0436\u0435\u043d"),email:T.b().email("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430").required("\u041f\u043e\u0447\u0442\u0443, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430")}),n=function(){var a=Object(h.a)(b.a.mark((function a(t){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e(S(t));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.c,{initialValues:{username:"",password:"",email:""},validationSchema:t,onSubmit:n},r.a.createElement(A.a,{className:"form"},r.a.createElement("h1",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"username"},"\u0418\u043c\u044f",r.a.createElement("span",{className:"required-star"}," *")),r.a.createElement(A.a.Item,{name:"username"},r.a.createElement(z.a,{id:"username",name:"username",placeholder:"\u0418\u0432\u0430\u043d",size:"large",suffix:r.a.createElement(F.a,null)}))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"email"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043f\u043e\u0447\u0442\u0430",r.a.createElement("span",{className:"required-star"}," *")),r.a.createElement(A.a.Item,{name:"email"},r.a.createElement(z.a,{id:"email",name:"email",placeholder:"ivan@mail.ru",size:"large",suffix:r.a.createElement(I.a,null)}))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"pwd"},"\u041f\u0430\u0440\u043e\u043b\u044c",r.a.createElement("span",{className:"required-star"}," *")),r.a.createElement(A.a.Item,{name:"password"},r.a.createElement(z.a.Password,{id:"pwd",name:"password",placeholder:"bu7UYvjl2nkj9WNshd",size:"large",autoComplete:"off"}))),r.a.createElement("div",{className:"formButtonsContainer"},r.a.createElement(C.a,{loading:!1,disabled:!1,size:"large",className:"button"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),r.a.createElement("span",{className:"error"},a))),r.a.createElement("p",null,"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d?"),r.a.createElement(d.b,{to:"/login"},"\u0412\u043e\u0439\u0442\u0438"))},q=function(){var e=Object(o.b)(),a=Object(o.c)((function(e){return e.error})),t=T.a().shape({password:T.b().matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{6,40}$/,"\u043e\u0442 6 \u0434\u043e 40 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432, \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0430 \u0446\u0438\u0444\u0440\u0430 \u0438 \u043e\u0434\u043d\u0430 \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u0430\u044f \u0431\u0443\u043a\u0432\u0430").required("\u041f\u0430\u0440\u043e\u043b\u044c \u043d\u0443\u0436\u0435\u043d"),email:T.b().email("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430").required("\u041f\u043e\u0447\u0442\u0443, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430")}),n=function(){var a=Object(h.a)(b.a.mark((function a(t){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e(x(t));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.c,{initialValues:{password:"",email:""},validationSchema:t,onSubmit:n},r.a.createElement(A.a,{className:"form"},r.a.createElement("h1",null,"\u0412\u0445\u043e\u0434"),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"email"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043f\u043e\u0447\u0442\u0430",r.a.createElement("span",{className:"required-star"}," *")),r.a.createElement(A.a.Item,{name:"email"},r.a.createElement(z.a,{id:"email",name:"email",placeholder:"ivan@mail.ru",size:"large",suffix:r.a.createElement(I.a,null)}))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"pwd"},"\u041f\u0430\u0440\u043e\u043b\u044c",r.a.createElement("span",{className:"required-star"}," *")),r.a.createElement(A.a.Item,{name:"password"},r.a.createElement(z.a.Password,{id:"pwd",name:"password",placeholder:"bu7UYvjl2nkj9WNshd",size:"large",autoComplete:"off"}))),r.a.createElement("div",{className:"formButtonsContainer"},r.a.createElement(C.a,{loading:!1,disabled:!1,size:"large",className:"button"},"\u0412\u043e\u0439\u0442\u0438")),r.a.createElement("span",{className:"error"},a))),r.a.createElement("p",null,"\u0415\u0449\u0435 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d?"),r.a.createElement(d.b,{to:"/signup"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))},G=t(116),H=t(344),L=(t(335),function(){var e=Object(o.b)(),a=Object(o.c)((function(e){return e.currentUser})).username;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439 ".concat(a)),r.a.createElement(G.a,{disabled:!1,size:"large",className:"button",icon:r.a.createElement(H.a,null),shape:"round",onClick:function(a){a.preventDefault(),localStorage.removeItem("token"),e({type:"LOGOUT_USER"})}},"\u0412\u044b\u0439\u0442\u0438"))}),R=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"404"),r.a.createElement("h2",null,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"))},Z=(t(336),function(){var e=Object(o.b)(),a=Object(o.c)((function(e){return e.currentUser}));Object(n.useEffect)((function(){e(function(){var e=Object(h.a)(b.a.mark((function e(a){var t,n,r,c,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage,n=t.token){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,r=k(),e.next=7,j.a.get(r,{headers:{Authorization:"Token ".concat(n)}});case 7:c=e.sent,l=c.data,a(y(l.user)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),localStorage.removeItem("token");case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(a){return e.apply(this,arguments)}}())}),[]);var t=a.id;return r.a.createElement(d.a,null,r.a.createElement("div",{className:"App"},t?r.a.createElement(E.a,{to:"/"}):r.a.createElement(E.a,{to:"/login"}),r.a.createElement(E.d,null,r.a.createElement(E.b,{exact:!0,path:"/",component:L}),r.a.createElement(E.b,{path:"/login",component:q}),r.a.createElement(E.b,{path:"/signup",component:_}),r.a.createElement(E.b,{path:"*",component:R}))))}),B=Object(u.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LOGIN_USER":return Object(i.a)(Object(i.a)({},e),{},{currentUser:a.payload});case"LOGOUT_USER":return Object(i.a)(Object(i.a)({},e),{},{currentUser:{}});case"CHANGE_FETCH_STATUS":return Object(i.a)(Object(i.a)({},e),{},{error:a.payload});default:return e}}),Object(u.compose)(Object(u.applyMiddleware)(s.a),Object(m.composeWithDevTools)()));l.a.render(r.a.createElement(o.a,{store:B},r.a.createElement(Z,null)),document.getElementById("root"))}},[[187,1,2]]]);
//# sourceMappingURL=main.42e2e00b.chunk.js.map