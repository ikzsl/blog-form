(this["webpackJsonpblog-form"]=this["webpackJsonpblog-form"]||[]).push([[0],{173:function(e,a,t){e.exports=t.p+"static/media/logo.968531f8.png"},193:function(e,a,t){e.exports=t(346)},218:function(e,a,t){},219:function(e,a,t){},221:function(e,a,t){},343:function(e,a,t){},344:function(e,a,t){},345:function(e,a,t){},346:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(43),l=t.n(c),o=t(26),s=t(171),m=t(49),u=t(172),i=t(119),p=t(349),d=t(27),f=t.n(d),E=t(66),b=t(87),h=t.n(b),v=t(352);h.a.defaults.baseURL="https://conduit.productionready.io/api/";var g,w=function(){return"users"},O=function(){return"users/login"},j=function(){return"user"},N=Object(v.a)("CHANGE_FETCH_STATUS"),k=Object(v.a)("LOGIN_USER"),x=Object(v.a)("LOGOUT_USER"),I=function(){var e=Object(E.a)(f.a.mark((function e(a,t,n){var r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post(n,{user:a});case 2:r=e.sent,c=r.data,localStorage.setItem("token",c.user.token),t(N(null)),t(k(c.user));case 7:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),S=function(e,a){return function(){var t=Object(E.a)(f.a.mark((function t(n){var r,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I(e,n,O());case 3:t.next=11;break;case 5:t.prev=5,t.t0=t.catch(0),r=t.t0.response,c=r.data.errors,n(N(c)),a("password","email or password ".concat(c["email or password"]));case 11:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()},y=Object(p.a)((g={},Object(i.a)(g,x,(function(){})),Object(i.a)(g,k,(function(e,a){return a.payload})),g),{}),z=Object(p.a)(Object(i.a)({},N,(function(e,a){return a.payload})),{}),q=Object(m.combineReducers)({currentUser:y,errors:z}),C=(t(217),t(218),t(48)),F=t(6),U=(t(219),t(173)),T=t.n(U),A=function(){return r.a.createElement("header",null,r.a.createElement("img",{src:T.a,width:"100",alt:"logo"}))},R=t(12),_=t(46),B=t(348),G=t(351),L=t(347),W=t(353),D=t(354),H=t(355),J=(t(221),_.a().shape({username:_.b().max(50,"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u043e - \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u0418\u043c\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"),password:_.b().matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d\w\W]{6,40}$/,"\u043e\u0442 6 \u0434\u043e 40 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432, \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0430 \u0446\u0438\u0444\u0440\u0430 \u0438 \u043e\u0434\u043d\u0430 \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u0430\u044f \u0431\u0443\u043a\u0432\u0430").required("\u041f\u0430\u0440\u043e\u043b\u044c \u043d\u0443\u0436\u0435\u043d"),email:_.b().email("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430").required("\u041f\u043e\u0447\u0442\u0443, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430")})),P={username:"",password:"",email:""},V=function(){var e=Object(o.b)();return r.a.createElement("div",{className:"formContainer"},r.a.createElement(R.c,{initialValues:P,validationSchema:J,onSubmit:function(a,t){var n=t.setFieldError;e(function(e,a){return function(){var t=Object(E.a)(f.a.mark((function t(n){var r,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{I(e,n,w())}catch(l){r=l.response,c=r.data.errors,n(N(c)),a("email",c.email),a("username",c.username),a("password",c.password)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(a,n))}},r.a.createElement(B.a,{className:"form"},r.a.createElement("h1",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"),r.a.createElement("div",{className:"formItem"},r.a.createElement("label",{htmlFor:"username"},"\u0418\u043c\u044f",r.a.createElement("span",{className:"required-star"}," *")),r.a.createElement(B.a.Item,{name:"username"},r.a.createElement(G.a,{id:"username",name:"username",placeholder:"\u0418\u0432\u0430\u043d",size:"large",suffix:r.a.createElement(W.a,null)}))),r.a.createElement("div",{className:"formItem"},r.a.createElement("label",{htmlFor:"email"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043f\u043e\u0447\u0442\u0430",r.a.createElement("span",{className:"required-star"}," *")),r.a.createElement(B.a.Item,{name:"email"},r.a.createElement(G.a,{id:"email",name:"email",placeholder:"ivan@mail.ru",size:"large",suffix:r.a.createElement(D.a,null)}))),r.a.createElement("div",{className:"formItem"},r.a.createElement("label",{htmlFor:"pwd"},"\u041f\u0430\u0440\u043e\u043b\u044c",r.a.createElement("span",{className:"required-star"}," *")),r.a.createElement(B.a.Item,{name:"password"},r.a.createElement(G.a.Password,{id:"pwd",name:"password",placeholder:"bu7UYvjl2nkj9WNshd",size:"large",autoComplete:"off"}))),r.a.createElement("div",{className:"formButtonsContainer"},r.a.createElement(L.a,{loading:!1,disabled:!1,size:"large",shape:"round",icon:r.a.createElement(H.a,null),className:"button"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))),r.a.createElement("div",{className:"link-container"},r.a.createElement("span",null,"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c? "),r.a.createElement(C.b,{to:"/login"},"\u0412\u043e\u0439\u0442\u0438")))},Z=t(356),M=(t(343),{password:"",email:""}),Y=_.a().shape({password:_.b().required("\u041f\u0430\u0440\u043e\u043b\u044c \u043d\u0443\u0436\u0435\u043d"),email:_.b().email("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430").required("\u041f\u043e\u0447\u0442\u0443, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430")}),$=function(){var e=Object(o.b)(),a=function(){var a=Object(E.a)(f.a.mark((function a(t,n){var r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=n.setFieldError,e(S(t,r));case 2:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"formContainer"},r.a.createElement(R.c,{initialValues:M,validationSchema:Y,onSubmit:a},r.a.createElement(B.a,null,r.a.createElement("h1",null,"\u0412\u0445\u043e\u0434"),r.a.createElement("div",{className:"formItem"},r.a.createElement("label",{htmlFor:"email"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043f\u043e\u0447\u0442\u0430",r.a.createElement("span",{className:"required-star"}," *")),r.a.createElement(B.a.Item,{name:"email"},r.a.createElement(G.a,{id:"email",name:"email",placeholder:"ivan@mail.ru",size:"large",suffix:r.a.createElement(D.a,null)}))),r.a.createElement("div",{className:"formItem"},r.a.createElement("label",{htmlFor:"pwd"},"\u041f\u0430\u0440\u043e\u043b\u044c",r.a.createElement("span",{className:"required-star"}," *")),r.a.createElement(B.a.Item,{name:"password"},r.a.createElement(G.a.Password,{id:"pwd",name:"password",size:"large",autoComplete:"off"}))),r.a.createElement("div",{className:"formButtonsContainer"},r.a.createElement(L.a,{loading:!1,disabled:!1,size:"large",shape:"round",icon:r.a.createElement(Z.a,null),className:"button"},"\u0412\u043e\u0439\u0442\u0438")))),r.a.createElement("div",{className:"link-container"},r.a.createElement(C.b,{to:"/signup"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))},K=t(120),Q=t(357),X=(t(344),function(){var e=Object(o.b)(),a=Object(o.c)((function(e){return e.currentUser})).username;return r.a.createElement("div",{className:"form-container"},r.a.createElement("h1",null,"\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439 ".concat(a)),r.a.createElement(K.a,{disabled:!1,size:"large",className:"button",icon:r.a.createElement(Q.a,null),shape:"round",onClick:function(a){a.preventDefault(),localStorage.removeItem("token"),e(x())},type:"danger"},"\u0412\u044b\u0439\u0442\u0438"))}),ee=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"404"),r.a.createElement("h2",null,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"))},ae=t(114),te=function(e){var a=e.component,t=Object(ae.a)(e,["component"]);return r.a.createElement(F.b,Object.assign({},t,{render:function(){return localStorage.getItem("token")?r.a.createElement(a,null):r.a.createElement(F.a,{to:"/login"})}}))},ne=function(e){var a=e.component,t=Object(ae.a)(e,["component"]);return r.a.createElement(F.b,Object.assign({},t,{render:function(){return localStorage.getItem("token")?r.a.createElement(F.a,{to:"/"}):r.a.createElement(a,null)}}))},re=(t(345),function(){var e=Object(o.b)(),a=Object(o.c)((function(e){return e.currentUser}));return Object(n.useEffect)((function(){e(function(){var e=Object(E.a)(f.a.mark((function e(a){var t,n,r,c,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage,n=t.token){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,r=j(),e.next=7,h.a.get(r,{headers:{Authorization:"Token ".concat(n)}});case 7:c=e.sent,l=c.data,a(k(l.user)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),401===e.t0.response.status&&localStorage.removeItem("token");case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(a){return e.apply(this,arguments)}}())}),[a.id]),r.a.createElement(C.a,null,r.a.createElement(A,null),r.a.createElement(F.d,null,r.a.createElement(te,{exact:!0,path:"/",component:X}),r.a.createElement(ne,{exact:!0,path:"/login",component:$}),r.a.createElement(ne,{exact:!0,path:"/signup",component:V}),r.a.createElement(F.b,{path:"*",component:ee})))}),ce=Object(m.createStore)(q,Object(u.composeWithDevTools)(Object(m.applyMiddleware)(s.a)));l.a.render(r.a.createElement(o.a,{store:ce},r.a.createElement(re,null)),document.getElementById("root"))}},[[193,1,2]]]);
//# sourceMappingURL=main.51809124.chunk.js.map